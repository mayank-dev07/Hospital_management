<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="/node_modules/angular/angular.min.js"></script>
    <script src="/node_modules/@uirouter/angularjs/release/angular-ui-router.min.js"></script>
    <link
      rel="stylesheet"
      href="/node_modules/bootstrap/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="/node_modules/bootstrap-icons/font/bootstrap-icons.css"
    />
  </head>
  <body ng-app="myModule" ng-controller="showAppointmentsController">
    <div class="container-fluid" style="background-color: #e2e1e14e">
      <div class="row">
        <div
          class="offcanvas offcanvas-start"
          tabindex="-1"
          id="offcanvasExample"
          aria-labelledby="offcanvasExampleLabel"
        >
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel">
              Dashboard
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>
          <div class="offcanvas-body" style="background-color: #fbfbfb">
            <div ng-repeat="details in leftPanel">
              <a href="" ng-click="patient(details.panelLink)">
                <h5 class="mt-5">{{ details.panel}}</h5>
              </a>
            </div>
          </div>
        </div>

        <nav class="navbar container-fluid d-flex justify-content-between">
          <i
            class="bi bi-house-door ms-5"
            style="font-size: 32px"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasExample"
            aria-controls="offcanvasExample"
          ></i>
          <div class="col-md-4">
            <form class="" role="search">
              <input
                class="form-control autocomplete-control topbar-search rounded-pill p-2"
                type="search"
                placeholder="Search"
                aria-label="Search"
                style="background-color: #ccd2d4"
                ng-model="searchname"
              />
            </form>
          </div>
          <div class="d-flex col-md-1">
            <p class="p-2" style="font-size: 24px">Logout</p>
            <i
              class="bi bi-box-arrow-right"
              style="font-size: 28px"
              ng-click="logout()"
            ></i>
          </div>
        </nav>
      </div>
    </div>

    <div ng-show="loader">
      <div class="vh-100 d-flex justify-content-center align-items-center">
        <div class="text-center">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-12 mt-5" ng-show="patientAppointment">
      <div class="col-md-2"></div>
      <div class="container-fluid col-md-10 mt-5">
        <h4
          class="d-flex justify-content-center blockquote"
          style="font-size: 32px; color: #276acf"
        >
          Appointments details
        </h4>
        <div class="row mt-3">
          <div class="card-body ms-5">
            <div class="d-flex justify-content-center">
              <table class="table border-primary" id="appointment">
                <thead>
                  <tr class="border-success">
                    <th class="display-1" style="font-size: 30px">S.No</th>
                    <th class="display-1" style="font-size: 30px">
                      Doctor name
                    </th>
                    <th class="display-1" style="font-size: 30px">
                      Doctor Email
                    </th>
                    <th class="display-1" style="font-size: 30px">
                      Doctor Phone
                    </th>
                    <th class="display-1" style="font-size: 30px">Date</th>
                    <th class="display-1" style="font-size: 30px">Time</th>
                    <th class="display-1" style="font-size: 30px">Status</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <td></td>
                  <td>
                    <input
                      type="text"
                      class="form-control border border-black w-50"
                      ng-model="searchname"
                      placeholder="Name"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control border border-black w-50"
                      ng-model="searchEmail"
                      placeholder="Email"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control border border-black w-50"
                      ng-model="searchPhone"
                      placeholder="Phone"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control border border-black w-50"
                      ng-model="searchDate"
                      placeholder="Date"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control border border-black w-50"
                      ng-model="searchTime"
                      placeholder="Time"
                    />
                  </td>
                  <th>
                    <tr
                      ng-repeat="doctor in appointments| filter: { 
                        doctor_id__user_id__first_name: searchname ,
                        doctor_id__user_id__email:searchEmail,
                        doctor_id__phone:searchPhone,
                        date:searchDate,
                        time:searchTime,
                      }"
                    >
                      <th>{{$index + 1}}</th>
                      <td style="font-size: 18px">
                        {{ doctor.doctor__user__first_name }} {{
                        doctor.doctor__user__last_name }}
                      </td>
                      <td style="font-size: 18px">
                        {{doctor.doctor_id__user_id__email}}
                      </td>
                      <td style="font-size: 18px">
                        {{doctor.doctor_id__phone}}
                      </td>
                      <td style="font-size: 18px">{{doctor.date}}</td>
                      <td style="font-size: 18px">{{doctor.time}}</td>
                      <td
                        style="font-size: 18px"
                        ng-if="doctor.approve_doctor || doctor.approve_receptionist "
                      >
                        <button class="btn btn-primary">Prescription</button>
                      </td>
                      <td
                        style="font-size: 18px"
                        ng-if="!doctor.approve_doctor && !doctor.approve_receptionist"
                      >
                        Waiting...
                      </td>
                    </tr>
                  </th>
                </tbody>
              </table>
            </div>
            <button
              class="btn text-white float-end"
              style="background-color: #276acf; font-size: 18px"
              ng-click="exportTableToExcel('appointment', 'appointment')"
            >
              Export to excel
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
