<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="/node_modules/angular/angular.min.js"></script>
    <script src="/node_modules/@uirouter/angularjs/release/angular-ui-router.min.js"></script>
    <link
      rel="stylesheet"
      href="/node_modules/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="/node_modules/bootstrap/dist/css/bootstrap.min.css"
    />
  </head>
  <body ng-model="myModule" ng-controller="doctorController">
    <div class="container-fluid" style="background-color: #e2e1e14e">
      <div class="row">
        <div
          class="offcanvas offcanvas-start"
          tabindex="-1"
          id="offcanvasExample"
          aria-labelledby="offcanvasExampleLabel"
        >
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel">
              Dashboard
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>
          <div class="offcanvas-body" style="background-color: #fbfbfb">
            <div ng-repeat="details in leftPanel">
              <a href="" ng-click="patient(details.panelLink)">
                <h5 class="mt-5">{{ details.panel}}</h5>
              </a>
            </div>
          </div>
        </div>
        <nav class="navbar container-fluid d-flex justify-content-between">
          <i
            class="bi bi-house-door ms-5"
            style="font-size: 32px"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasExample"
            aria-controls="offcanvasExample"
          ></i>
          <div class="col-md-4">
            <form class="" role="search">
              <input
                class="form-control autocomplete-control topbar-search rounded-pill p-2"
                type="search"
                placeholder="Search"
                aria-label="Search"
                style="background-color: #ccd2d4"
                ng-model="searchname"
              />
            </form>
          </div>
          <div class="d-flex col-md-1">
            <p class="p-2" style="font-size: 24px">Logout</p>
            <i
              class="bi bi-box-arrow-right"
              style="font-size: 28px"
              ng-click="logout()"
            ></i>
          </div>
        </nav>
      </div>
    </div>
    <div ng-show="loader">
      <div class="vh-100 d-flex justify-content-center align-items-center">
        <div class="text-center">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-12 mt-5">
      <div class="col-md-2"></div>
      <div class="container-fluid col-md-10 mt-5">
        <h4
          class="d-flex justify-content-center blockquote"
          style="font-size: 32px; color: #276acf"
        >
          Doctor details
        </h4>
        <div class="row mt-3">
          <div class="card-body ms-5">
            <div class="d-flex justify-content-center">
              <table id="exportable" class="table border-primary">
                <thead class="border-success">
                  <tr>
                    <th class="display-1" style="font-size: 30px">S.No</th>
                    <th class="display-1" style="font-size: 30px">Name</th>
                    <th class="display-1" style="font-size: 30px">Address</th>
                    <th class="display-1" style="font-size: 30px">
                      Qualification
                    </th>
                    <th class="display-1" style="font-size: 30px">Email</th>
                    <th class="display-1" style="font-size: 30px">
                      Speciality
                    </th>
                    <th class="display-1" style="font-size: 30px">Fees</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td></td>
                    <td>
                      <input
                        type="text"
                        class="form-control border border-black w-50"
                        ng-model="searchname"
                        placeholder="Name"
                      />
                    </td>
                    <td>
                      <input
                        type="text"
                        class="form-control border border-black w-50"
                        ng-model="searchAddress"
                        placeholder="Address"
                      />
                    </td>
                    <td>
                      <input
                        type="text"
                        class="form-control border border-black w-50"
                        ng-model="searchQualification"
                        placeholder="Qualification"
                      />
                    </td>
                    <td>
                      <input
                        type="text"
                        class="form-control border border-black w-50"
                        ng-model="searchEmail"
                        placeholder="Email"
                      />
                    </td>
                    <td>
                      <input
                        type="text"
                        class="form-control border border-black w-50"
                        ng-model="searchSpeciality"
                        placeholder="Speciality"
                      />
                    </td>
                    <td>
                      <input
                        type="text"
                        class="form-control border border-black w-50"
                        ng-model="searchFees"
                        placeholder="Fees"
                      />
                    </td>

                    <th></th>

                    <th>
                      <tr
                        ng-repeat="doctor in doctorDetails| filter: { 
                      first_name: searchname ,
                      doctor__address:searchAddress,
                      doctor__qualification__qualification:searchQualification,
                      email:searchEmail,
                      doctor__speciality__speciality:searchSpeciality,
                      doctor__fees: searchFees
                    }"
                      >
                        <th>{{$index + 1}}</th>
                        <td style="font-size: 18px">
                          {{doctor.first_name}} {{doctor.last_name}}
                        </td>
                        <td style="font-size: 18px">
                          {{doctor.doctor__address}}
                        </td>
                        <td style="font-size: 18px">
                          {{doctor.doctor__qualification__qualification}}
                        </td>
                        <td style="font-size: 18px">{{doctor.email}}</td>
                        <td style="font-size: 18px">
                          {{doctor.doctor__speciality__speciality}}
                        </td>
                        <td style="font-size: 18px">{{doctor.doctor__fees}}</td>
                        <td>
                          <button
                            type="button"
                            class="btn text-white"
                            data-bs-toggle="modal"
                            style="background-color: #276acf; font-size: 18px"
                            data-bs-target="#exampleModal"
                            ng-click="view(doctor.doctor__id)"
                          >
                            view
                          </button>
                        </td>
                      </tr>
                    </th>
                  </tr>
                </tbody>
              </table>
            </div>
            <button
              class="btn text-white float-end"
              style="background-color: #276acf; font-size: 18px"
              ng-click="exportTableToExcel('appointment', 'appointment')"
            >
              Export to excel
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
            <div class="col-md-12 mt-5">
              <h4
                class="d-flex justify-content-center blockquote"
                style="font-size: 32px"
              >
                Patient details
              </h4>
              <div class="row mt-3">
                <div class="card-body ms-5">
                  <div class="d-flex justify-content-center">
                    <table id="patient" class="table">
                      <thead class="border-success">
                        <tr>
                          <th class="display-1" style="font-size: 30px">
                            S.No
                          </th>
                          <th class="display-1" style="font-size: 30px">
                            Name
                          </th>
                          <th class="display-1" style="font-size: 30px">
                            Address
                          </th>
                          <th class="display-1" style="font-size: 30px">
                            Email
                          </th>
                          <th class="display-1" style="font-size: 30px">
                            Phone
                          </th>
                          <th class="display-1" style="font-size: 30px">Age</th>
                          <th class="display-1" style="font-size: 30px">
                            Gender
                          </th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody class="border-primary">
                        <tr ng-repeat="doctor in patientDetails">
                          <th>{{$index + 1}}</th>
                          <td style="font-size: 18px">
                            {{doctor.patient_id__user_id__first_name}}
                            {{doctor.last_name}}
                          </td>
                          <td style="font-size: 18px">
                            {{doctor.patient__address}}
                          </td>
                          <td style="font-size: 18px">
                            {{doctor.patient_id__user_id__email}}
                          </td>
                          <td style="font-size: 18px">
                            {{doctor.patient__Phone}}
                          </td>
                          <td style="font-size: 18px">
                            {{doctor.patient__age}}
                          </td>
                          <td style="font-size: 18px">
                            {{doctor.patient__gender}}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <button
                    class="btn btn-primary float-end"
                    ng-click="exportTableToExcel('patient', 'patient')"
                  >
                    Export to excel
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </body>
</html>
